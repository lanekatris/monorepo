<a href="/dg">Disc Golf Home Page</a>


<fieldset>
  <h1>Search For Courses</h1>
  <label for="search-courses">Name or ID: </label><input type="text" id="search-courses"/>
  <ul id="search-courses-results"></ul>
</fieldset>

<fieldset>
<h1>Load Your Played Rounds</h1>
<form method="post" action="/dg/generator/file" id="played-rounds-form" enctype="multipart/form-data">
  <input type="file" id="file" name="file" />
  <input type="submit"/>
</form>
<h4>Or Add Manually Played Round</h4>
<form method="post" action="/dg/generator/course-played">
  <label>PDGA Course ID:
    <input type="text" name="courseId" />
  </label>
  <input type="submit"/>
</form>

<h4>Manually Added Rounds</h4>
<ul>
  {{#manuallyPlayedCourses}}
    <li>{{this}}</li>
  {{/manuallyPlayedCourses}}
</ul>
</fieldset>

<h4>Exclude Courses From Recommendations</h4>
<form method="post" action="/dg/generator/course-excluded">
  <label>PDGA Course ID:
    <input type="text" name="courseId" />
  </label>
  <label>Reason
    <input type="text" name="reason" />
  </label>
  <input type="submit"/>
</form>
<h4>Excluded Courses ({{excludedCourses.length}})</h4>
<ul>
  {{#excludedCourses}}
    <li>{{this}}</li>
  {{/excludedCourses}}
</ul>

<h1>Data Generation</h1>
<a href="/dg/generator/generate">Generate GEO JSON</a>


<h1>Your Played Courses ({{courses.length}})</h1>
<ul>
  {{#each courses}}
    <li>{{this}}</li>
  {{/each}}
</ul>

<script type="application/javascript">
  const searchResultsEl = document.getElementById('search-courses-results')
  document.getElementById('search-courses').onkeyup = (e) => {
    console.log('course search', e.target.value)
    // get results
    if (!e.target.value) {
      searchResultsEl.innerHTML = ''
      return;
    }

    fetch(`/dg/course-generator/courses/autocomplete?query=${e.target.value}`)
      .then(response => response.json())
      .then(courses => {
        searchResultsEl.innerHTML = courses.map(({pdgaId, name}) => `<li>${name} (${pdgaId})</li>`).join('')
      })
  }
</script>
